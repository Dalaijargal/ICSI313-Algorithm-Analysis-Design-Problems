# Бодлого 6 - Knapsack Problem 
## Knapsack Problem гэдэг нь:
Knapsack бодлого нь сонгодог оновчлолын асуудал юм. Энэ бодлого нь: Тус бүрдээ жин болон үнэ цэнэтэй зүйлсүүдийн олонлог өгөгдсөн бол хязгаарлагдмал багтаамжтай үүргэвчинд хийж болох хамгийн үнэт зүйлсүүд юу байх вэ?
Бодлогын гол зорилго нь сонгогдсон зүйлсийн нийт жинг үүргэвчний багтаамжаас хэтрүүлэхгүйгээр тэдгээрийн нийт үнэ цэнийг хамгийн их байлгахад оршино.
### Бодлогын жишээ
Бидэнд дараах зүйлс байна гэж бодъё.
```
|No |Үнэ цэнэ |   Жин   |
|---|---------|---------|
| 1 |    1    |    1    |
| 2 |    6    |    2    |
| 3 |    18   |    5    |
| 4 |    22   |    6    |
| 5 |    28   |    7    |
```
Мөн үүрэвчийн багтаамж 11 гэж үзээд үүргэвчинд багтах үнэ цэнийн утгыг хамгийн их байлгах зүйлсийн цуглуулга нь 3 болон 4-р зүйлсүүд буюу нийт үнэ цэнэ 40, нийт жин 11 байна.

## Knapsack Problem анализ
Knapsack бодлого нь NP-hard бодлогын төрөлд ордог болохоор үүнийг олон гишүүнт (polynomial) хугацаанд боддог алгоритм байхгүй. Гэхдээ үүнийг pseudo-polynomial хугацаанд шийдэх хэд хэдэн аргууд бий. Энэ нь алгоритмийн ажиллах хугацаа нь оролтын хэмжээгээр олон гишүүнт байх боловч оролтын утгын хувьд заавал байх албагүй гэсэн үг.

### Brute Force ашиглан бодох
Brute Force нь бүх боломжит зүйлсийн цуглуулгуудыг үүсгээд үүргэвчний багтаамжийн хязгаарт багтах, хамгийн их үнэ цэнэтэй зүйлсийн цуглуулгыг сонгож бодох арга юм. Гэвч бүх боломжит цуглуулга нь 2^n ширхэг байна. Эд зүйлсийн тоо буюу n тоо нь их байх тусам энэ аргыг ашиглан бодох боломжгүй болно. Тиймээс Brute Force ашиглан бодоход зарцуулах хугацаа O(2^n) байна.
Brute Force ашиглан бодох алгоритм:
```
1. Үүргэвчний багтаамжийг W гэе.
2. Бүх боломжит эд зүйлсүүдийн цуглуулгын жагсаалтыг гарга.
3. Зүйлсүүдийн цуглуулга бүрийн хувьд:
    а. Нийт жин ба нийт үнэ цэнийг тооцоол.
    б. Хэрэв нийт жин нь W-ээс бага буюу тэнцүү бөгөөд нийт үнэ цэнэ нь одоогийн хамгийн их утгаас их байвал хамгийн их утгыг шинэчил.
4. Хамгийн их утгыг буцаа.
```

### Динамик програмчлал ашиглан бодох
Knapsack бодлогыг динамик програмчлал ашиглан бодох нь хамгийн түгээмэл арга юм. Динамик програмчлалын арга нь асуудлыг дэд асуудал болгон хувааж, дэд асуудал бүрийг зөвхөн нэг удаа шийдэн үр дүнг хүснэгтэд хадгалснаар дараа дахин ашиглах боломжтой болгодог.
Динамик програмчлал ашиглан бодвол зарцуулах хугацаа O(nW) болно. Үүнд n нь эд зүйлсийн тоо ширхэг, W нь үүргэвчний багтаамжийн жин юм.
Динамик програмчлал ашиглан бодох алгоритм:
```
1. (n+1) x (W+1) хэмжээтэй 2 хэмжээст dp массив үүсгэ. (n нь эд зүйлсийн тоо, W нь үүргэвчний багтаамжийн жин.)
2. Хэрэв үүргэвчний багтаамж 0 эсвэл ямар ч эд зүйлс байхгүй бол үүргэвчний утга 0 байх тул dp-ийн эхний мөр ба баганыг 0 утгаар бөглөнө.
3. 1-ээс n хүртэлх i зүйл бүрийн хувьд эхний i зүйлсэд үүргэвчний хамгийн их жин нь k (k нь 0-ээс W хооронд байна) байхад авч болох хамгийн их үнэ цэний утгыг тооцоол. Үүнийг хийхэд дараах хоёр тохиодлоос харьцуулан бод.
    а. i-р зүйлийг үүргэвчинд хийхгүй. Энэ тохиолдолд авч болох хамгийн их утга нь i-1 зүйлсүүдийг ашиглан авч болох хамгийн их үнэ цэнийн утгатай тэнцүү байх ба үүргэвчний багтаамж k байна.
    б. i-р зүйлийг үүргэвчинд хийнэ. Энэ тохиолдолд i-1 зүйлсүүдийг ашиглан авсан хамгийн их үнэ цэнийн утгад i-р зүйлийн үнэ цэнийг нэмж, үүргэвчийн багтаамжийн жин нь i-р зүйлийн жинг хассан k утга байна.
4. dp[i][k]-д тохиолдол а болон тохиолдол б хоёрын хамгийн их утгыг хадгална.
5. Нийт n эд зүйлсийг ашиглан үүргэвчний багтаамжид багтах хамгийн их үнэ цэнийн утга dp[n][W]-д хадгалагдсан байна. 
```

Pseudo-code:
```
// w: жин
// v: үнэ цэнэ

if w[i] > k:
    dp[i][k] = dp[i-1][k]
else:
    dp[i][k] = max(dp[i-1][k], v[i] + dp[i-1][k-w[i]])
```